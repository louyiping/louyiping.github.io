<!doctype html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1" />






<meta name="description" content="常用操作以及概念 求助 关机 查看进程 查看端口 PATH 运行等级 sudo GNU 包管理工具 常见发行版本   分区 磁盘的文件名 分区表 1. MBR 2. GPT   开机检测程序 1. BIOS 2. UEFI   挂载   文件权限与目录配置 文件权限概念 文件属性以及权限的修改 1. 修改文件所属群组 2. 修改文件拥有者 3. 修改权限   目录的权限 文件默认权限 目录配置">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux">
<meta property="og:url" content="http://yoursite.com/2018/02/15/Linux/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="常用操作以及概念 求助 关机 查看进程 查看端口 PATH 运行等级 sudo GNU 包管理工具 常见发行版本   分区 磁盘的文件名 分区表 1. MBR 2. GPT   开机检测程序 1. BIOS 2. UEFI   挂载   文件权限与目录配置 文件权限概念 文件属性以及权限的修改 1. 修改文件所属群组 2. 修改文件拥有者 3. 修改权限   目录的权限 文件默认权限 目录配置">
<meta property="og:image" content="https://github.com/CyC2018/InterviewNotes/raw/master/pics//a5c25452-6fa5-49e7-9322-823077442775.jpg">
<meta property="og:image" content="https://github.com/CyC2018/InterviewNotes/raw/master/pics//f900f266-a323-42b2-bc43-218fdb8811a8.jpg">
<meta property="og:image" content="https://github.com/CyC2018/InterviewNotes/raw/master/pics//249f3bb1-feee-4805-a259-a72699d638ca.jpg">
<meta property="og:image" content="https://github.com/CyC2018/InterviewNotes/raw/master/pics//27ace615-558f-4dfb-8ad4-7ac769c10118.jpg">
<meta property="og:image" content="https://github.com/CyC2018/InterviewNotes/raw/master/pics//658fc5e7-79c0-4247-9445-d69bf194c539.png">
<meta property="og:image" content="https://github.com/CyC2018/InterviewNotes/raw/master/pics//1974a836-aa6b-4fb8-bce1-6eb11969284a.jpg">
<meta property="og:image" content="https://github.com/CyC2018/InterviewNotes/raw/master/pics//89091427-7b2b-4923-aff6-44681319a8aa.jpg">
<meta property="og:image" content="https://github.com/CyC2018/InterviewNotes/raw/master/pics//341c632a-1fc1-4068-9b9f-bf7ef68ebb4c.jpg">
<meta property="og:updated_time" content="2018-03-07T04:37:53.187Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Linux">
<meta name="twitter:description" content="常用操作以及概念 求助 关机 查看进程 查看端口 PATH 运行等级 sudo GNU 包管理工具 常见发行版本   分区 磁盘的文件名 分区表 1. MBR 2. GPT   开机检测程序 1. BIOS 2. UEFI   挂载   文件权限与目录配置 文件权限概念 文件属性以及权限的修改 1. 修改文件所属群组 2. 修改文件拥有者 3. 修改权限   目录的权限 文件默认权限 目录配置">
<meta name="twitter:image" content="https://github.com/CyC2018/InterviewNotes/raw/master/pics//a5c25452-6fa5-49e7-9322-823077442775.jpg">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2018/02/15/Linux/"/>





  <title>Linux | Hexo</title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  















  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Hexo</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/02/15/Linux/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Linux</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-02-15T00:00:00+08:00">
                2018-02-15
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        <!-- GFM-TOC -->
<ul>
<li><a href="#常用操作以及概念">常用操作以及概念</a><ul>
<li><a href="#求助">求助</a></li>
<li><a href="#关机">关机</a></li>
<li><a href="#查看进程">查看进程</a></li>
<li><a href="#查看端口">查看端口</a></li>
<li><a href="#path">PATH</a></li>
<li><a href="#运行等级">运行等级</a></li>
<li><a href="#sudo">sudo</a></li>
<li><a href="#gnu">GNU</a></li>
<li><a href="#包管理工具">包管理工具</a></li>
<li><a href="#常见发行版本">常见发行版本</a></li>
</ul>
</li>
<li><a href="#分区">分区</a><ul>
<li><a href="#磁盘的文件名">磁盘的文件名</a></li>
<li><a href="#分区表">分区表</a><ul>
<li><a href="#1-mbr">1. MBR</a></li>
<li><a href="#2-gpt">2. GPT</a></li>
</ul>
</li>
<li><a href="#开机检测程序">开机检测程序</a><ul>
<li><a href="#1-bios">1. BIOS</a></li>
<li><a href="#2-uefi">2. UEFI</a></li>
</ul>
</li>
<li><a href="#挂载">挂载</a></li>
</ul>
</li>
<li><a href="#文件权限与目录配置">文件权限与目录配置</a><ul>
<li><a href="#文件权限概念">文件权限概念</a></li>
<li><a href="#文件属性以及权限的修改">文件属性以及权限的修改</a><ul>
<li><a href="#1-修改文件所属群组">1. 修改文件所属群组</a></li>
<li><a href="#2-修改文件拥有者">2. 修改文件拥有者</a></li>
<li><a href="#3-修改权限">3. 修改权限</a></li>
</ul>
</li>
<li><a href="#目录的权限">目录的权限</a></li>
<li><a href="#文件默认权限">文件默认权限</a></li>
<li><a href="#目录配置">目录配置</a></li>
</ul>
</li>
<li><a href="#文件与目录">文件与目录</a><ul>
<li><a href="#文件时间">文件时间</a></li>
<li><a href="#文件与目录的基本操作">文件与目录的基本操作</a><ul>
<li><a href="#1-ls">1. ls</a></li>
<li><a href="#2-cp">2. cp</a></li>
<li><a href="#3-rm">3. rm</a></li>
<li><a href="#4-mv">4. mv</a></li>
</ul>
</li>
<li><a href="#获取文件内容">获取文件内容</a><ul>
<li><a href="#1-cat">1. cat</a></li>
<li><a href="#2-tac">2. tac</a></li>
<li><a href="#3-more">3. more</a></li>
<li><a href="#4-less">4. less</a></li>
<li><a href="#5-head">5. head</a></li>
<li><a href="#6-tail">6. tail</a></li>
<li><a href="#7-od">7. od</a></li>
<li><a href="#8-touch">8. touch</a></li>
</ul>
</li>
<li><a href="#指令与文件搜索">指令与文件搜索</a><ul>
<li><a href="#1-which">1. which</a></li>
<li><a href="#2-whereis">2. whereis</a></li>
<li><a href="#3-locate">3. locate</a></li>
<li><a href="#4-find">4. find</a><ul>
<li><a href="#41-与时间有关的选项">4.1 与时间有关的选项</a></li>
<li><a href="#42-与文件拥有者和所属群组有关的选项">4.2 与文件拥有者和所属群组有关的选项</a></li>
<li><a href="#43-与文件权限和名称有关的选项">4.3 与文件权限和名称有关的选项</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#磁盘与文件系统">磁盘与文件系统</a><ul>
<li><a href="#文件系统的组成">文件系统的组成</a></li>
<li><a href="#inode">inode</a></li>
<li><a href="#目录的-inode-与-block">目录的 inode 与 block</a></li>
<li><a href="#实体链接与符号链接">实体链接与符号链接</a><ul>
<li><a href="#1-实体链接">1. 实体链接</a></li>
<li><a href="#2-符号链接">2. 符号链接</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#压缩与打包">压缩与打包</a><ul>
<li><a href="#压缩">压缩</a><ul>
<li><a href="#1-gzip">1. gzip</a></li>
<li><a href="#2-bzip2">2. bzip2</a></li>
<li><a href="#3-xz">3. xz</a></li>
</ul>
</li>
<li><a href="#打包">打包</a></li>
</ul>
</li>
<li><a href="#bash">Bash</a><ul>
<li><a href="#bash-特性">Bash 特性</a></li>
<li><a href="#变量操作">变量操作</a></li>
<li><a href="#指令搜索顺序">指令搜索顺序</a></li>
<li><a href="#数据流重定向">数据流重定向</a></li>
<li><a href="#管线指令">管线指令</a><ul>
<li><a href="#1-提取指令cut">1. 提取指令：cut</a></li>
<li><a href="#2-排序命令sortuniq">2. 排序命令：sort、uniq</a></li>
<li><a href="#3-双向输出重定向tee">3. 双向输出重定向：tee</a></li>
<li><a href="#4-字符转换指令trcolexpandjoinpaste">4. 字符转换指令：tr、col、expand、join、paste</a></li>
<li><a href="#5-分区指令split">5. 分区指令：split</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#正规表示法与文件格式化处理">正规表示法与文件格式化处理</a><ul>
<li><a href="#grep">grep</a></li>
<li><a href="#printf">printf</a></li>
<li><a href="#awk">awk</a></li>
</ul>
</li>
<li><a href="#vim-三个模式">vim 三个模式</a></li>
<li><a href="#参考资料">参考资料</a><!-- GFM-TOC -->
</li>
</ul>
<h1 id="常用操作以及概念"><a href="#常用操作以及概念" class="headerlink" title="常用操作以及概念"></a>常用操作以及概念</h1><h2 id="求助"><a href="#求助" class="headerlink" title="求助"></a>求助</h2><p><strong>1. –help</strong> </p>
<p>指令的基本用法与选项介绍。</p>
<p><strong>2. man</strong> </p>
<p>man 是 manual 的缩写，将指令的具体信息显示出来。</p>
<p>当执行 man date 时，有 DATE(1) 出现，其中的数字代表指令的类型，常用的数字及其类型如下：</p>
<table>
<thead>
<tr>
<th>代号</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>用户在 shell 环境中可以操作的指令或者可执行文件</td>
</tr>
<tr>
<td>5</td>
<td>配置文件</td>
</tr>
<tr>
<td>8</td>
<td>系统管理员可以使用的管理指令</td>
</tr>
</tbody>
</table>
<p><strong>3. info</strong> </p>
<p>info 与 man 类似，但是 info 将文档分成一个个页面，每个页面可以进行跳转。</p>
<h2 id="关机"><a href="#关机" class="headerlink" title="关机"></a>关机</h2><p><strong>1. sync</strong> </p>
<p>为了加快对磁盘上文件的读写速度，位于内存中的文件数据不会立即同步到磁盘上，因此关机之前需要先进行 sync 同步操作。</p>
<p><strong>2. shutdown</strong> </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"># /sbin/shutdown [-krhc] [时间] [警告讯息]</div><div class="line">-k ： 不会关机，只是发送警告讯息，通知所有在线的用户</div><div class="line">-r ： 将系统的服务停掉后就重新启动</div><div class="line">-h ： 将系统的服务停掉后就立即关机</div><div class="line">-c ： 取消已经在进行的 shutdown 指令内容</div></pre></td></tr></table></figure>
<p><strong>3. 其它关机指令</strong> </p>
<p>reboot、halt、poweroff。</p>
<h2 id="查看进程"><a href="#查看进程" class="headerlink" title="查看进程"></a>查看进程</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ps aux | grep threadx</div></pre></td></tr></table></figure>
<h2 id="查看端口"><a href="#查看端口" class="headerlink" title="查看端口"></a>查看端口</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">netstat -anp | grep 80</div></pre></td></tr></table></figure>
<h2 id="PATH"><a href="#PATH" class="headerlink" title="PATH"></a>PATH</h2><p>可以在环境变量 PATH 中声明可执行文件的路径，路径之间用 : 分隔。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/home/dmtsai/.local/bin:/home/dmtsai/bin</div></pre></td></tr></table></figure>
<h2 id="运行等级"><a href="#运行等级" class="headerlink" title="运行等级"></a>运行等级</h2><ul>
<li>0：关机模式</li>
<li>1：单用户模式（可用于破解root密码）</li>
<li>2：无网络支持的多用户模式</li>
<li>3：有网络支持的多用户模式（文本模式，工作中最常用的模式）</li>
<li>4：保留，未使用</li>
<li>5：有网络支持的 X-windows 多用户模式（桌面）</li>
<li>6：重新引导系统，即重启</li>
</ul>
<h2 id="sudo"><a href="#sudo" class="headerlink" title="sudo"></a>sudo</h2><p>使用 sudo 允许一般用户使用 root 可执行的命令，只有在 /etc/sudoers 配置文件中添加的用户才能使用该指令。</p>
<h2 id="GNU"><a href="#GNU" class="headerlink" title="GNU"></a>GNU</h2><p>GNU 计划，又译为革奴计划，它的目标是创建一套完全自由的操作系统，称为 GNU，其内容软件完全以 GPL 方式发布。其中 GPL 全称为 GNU 通用公共许可协议，包含了以下内容：</p>
<ul>
<li>以任何目的运行此程序的自由；</li>
<li>再复制的自由；</li>
<li>改进此程序，并公开发布改进的自由。</li>
</ul>
<h2 id="包管理工具"><a href="#包管理工具" class="headerlink" title="包管理工具"></a>包管理工具</h2><p>RPM 和 DPKG 为最常见的两类软件包管理工具。RPM 全称为 Redhat Package Manager，最早由 Red Hat 公司制定实施，随后被 GNU 开源操作系统接受并成为很多 Linux 系统 (RHEL) 的既定软件标准。与 RPM 进行竞争的是基于 Debian 操作系统 (UBUNTU) 的 DEB 软件包管理工具－ DPKG，全称为 Debian Package，功能方面与 RPM 相似。</p>
<p>YUM 基于 RPM 包管理工具，具有依赖管理功能，并具有软件升级的功能。</p>
<h2 id="常见发行版本"><a href="#常见发行版本" class="headerlink" title="常见发行版本"></a>常见发行版本</h2><p>Linux 发行版是 Linux 内核及各种应用软件的集成版本。</p>
<table>
<thead>
<tr>
<th>基于的包管理工具</th>
<th>商业发行版</th>
<th>社区发行版</th>
</tr>
</thead>
<tbody>
<tr>
<td>DPKG</td>
<td>Ubuntu</td>
<td>Debian</td>
</tr>
<tr>
<td>RPM</td>
<td>Red Hat</td>
<td>Fedora / CentOS</td>
</tr>
</tbody>
</table>
<h1 id="分区"><a href="#分区" class="headerlink" title="分区"></a>分区</h1><h2 id="磁盘的文件名"><a href="#磁盘的文件名" class="headerlink" title="磁盘的文件名"></a>磁盘的文件名</h2><p>Linux 中每个硬件都被当做一个文件。</p>
<p>常见磁盘的文件名：</p>
<ul>
<li>SCSI/SATA/USB 磁盘：/dev/sd[a-p]</li>
<li>IDE 磁盘：/dev/hd[a-d]</li>
</ul>
<p>其中文件名后面的序号的确定与磁盘插入的顺序有关，而与磁盘所插入的插槽位置无关。</p>
<h2 id="分区表"><a href="#分区表" class="headerlink" title="分区表"></a>分区表</h2><p>磁盘分区表主要有两种格式，一种是限制较多的 MBR 分区表，一种是较新且限制较少的 GPT 分区表。</p>
<h3 id="1-MBR"><a href="#1-MBR" class="headerlink" title="1. MBR"></a>1. MBR</h3><p>MBR 中，第一个扇区最重要，里面有：主要开机记录（Master boot record, MBR）及分区表（partition table），其中 MBR 占 446 bytes，partition table 占 64 bytes。</p>
<p>分区表只有 64 bytes，最多只能存储 4 个分区，这 4 个分区为主分区（Primary）和扩展分区（Extended）。其中扩展分区只有一个，它将其它空间用来记录分区表，可以记录更多的分区，因此通过扩展分区可以分出更多区分，这些分区称为逻辑分区。</p>
<p>Linux 也把分区当成文件，分区文件的命名方式为：磁盘文件名+编号，例如 /dev/sda1。注意，逻辑分区的编号从 5 开始。</p>
<h3 id="2-GPT"><a href="#2-GPT" class="headerlink" title="2. GPT"></a>2. GPT</h3><p>不同的磁盘有不同的扇区大小，例如 512 bytes 和最新磁盘的 4k。GPT 为了兼容所有磁盘，在定义扇区上使用逻辑区块地址（Logical Block Address, LBA）。</p>
<p>GPT 第 1 个区块记录了 MBR，紧接着是 33 个区块记录分区信息，并把最后的 33 个区块用于对分区信息进行备份。</p>
<p>GPT 没有扩展分区概念，都是主分区，最多可以分 128 个分区。</p>
<p><br><div align="center"> <img src="https://github.com/CyC2018/InterviewNotes/raw/master/pics//a5c25452-6fa5-49e7-9322-823077442775.jpg"> </div><br></p>
<h2 id="开机检测程序"><a href="#开机检测程序" class="headerlink" title="开机检测程序"></a>开机检测程序</h2><h3 id="1-BIOS"><a href="#1-BIOS" class="headerlink" title="1. BIOS"></a>1. BIOS</h3><p>BIOS 是开机的时候计算机执行的第一个程序，这个程序知道可以开机的磁盘，并读取磁盘第一个扇区的 MBR，由 MBR 执行其中的开机管理程序，这个开机管理程序的会加载操作系统的核心文件。</p>
<p>MBR 中的开机管理程序提供以下功能：选单、载入核心文件以及转交其它开机管理程序。转交这个功能可以用来实现了多重引导，只需要将另一个操作系统的开机管理程序安装在其它分区的启动扇区上，在启动 MBR 中的开机管理程序时，就可以选择启动当前的操作系统或者转交给其它开机管理程序从而启动另一个操作系统。</p>
<p><br><div align="center"> <img src="https://github.com/CyC2018/InterviewNotes/raw/master/pics//f900f266-a323-42b2-bc43-218fdb8811a8.jpg"> </div><br></p>
<p>安装多重引导，最好先安装 Windows 再安装 Linux。因为安装 Windows 时会覆盖掉 MBR，而 Linux 可以选择将开机管理程序安装在 MBR 或者其它分区的启动扇区，并且可以设置开机管理程序的选单。</p>
<h3 id="2-UEFI"><a href="#2-UEFI" class="headerlink" title="2. UEFI"></a>2. UEFI</h3><p>UEFI 相比于 BIOS 来说功能更为全面，也更为安全。</p>
<h2 id="挂载"><a href="#挂载" class="headerlink" title="挂载"></a>挂载</h2><p>挂载利用目录作为分区的进入点，也就是说，进入目录之后就可以读取分区的数据。</p>
<p><br><div align="center"> <img src="https://github.com/CyC2018/InterviewNotes/raw/master/pics//249f3bb1-feee-4805-a259-a72699d638ca.jpg"> </div><br></p>
<h1 id="文件权限与目录配置"><a href="#文件权限与目录配置" class="headerlink" title="文件权限与目录配置"></a>文件权限与目录配置</h1><h2 id="文件权限概念"><a href="#文件权限概念" class="headerlink" title="文件权限概念"></a>文件权限概念</h2><p>把用户分为三种：文件拥有者、群组以及其它人，对不同的用户有不同的文件权限。</p>
<p>使用 ls 查看一个文件时，会显示一个文件的信息，例如 drwxr-xr-x. 3 root root 17 May 6 00:14 .config，对这个信息的解释如下：</p>
<ul>
<li>drwxr-xr-x：文件类型以及权限，第 1 位为文件类型字段，后 9 位为文件权限字段。</li>
<li>3：链接数；</li>
<li>root：文件拥有者；</li>
<li>root：所属群组；</li>
<li>17：文件大小；</li>
<li>May 6 00:14：文件最后被修改的时间；</li>
<li>.config：文件名。</li>
</ul>
<p>常见的文件类型及其含义有：</p>
<ul>
<li>d：目录；</li>
<li>-：文件；</li>
<li>l：链接文件；</li>
</ul>
<p>9 位的文件权限字段中，每 3 个为一组，共 3 组，每一组分别代表对文件拥有者、所属群组以及其它人的文件权限。一组权限中的 3 位分别为 r、w、x 权限，表示可读、可写、可执行。</p>
<h2 id="文件属性以及权限的修改"><a href="#文件属性以及权限的修改" class="headerlink" title="文件属性以及权限的修改"></a>文件属性以及权限的修改</h2><h3 id="1-修改文件所属群组"><a href="#1-修改文件所属群组" class="headerlink" title="1. 修改文件所属群组"></a>1. 修改文件所属群组</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># chgrp [-R] groupname dirname/filename</div><div class="line">-R：递归修改</div></pre></td></tr></table></figure>
<h3 id="2-修改文件拥有者"><a href="#2-修改文件拥有者" class="headerlink" title="2. 修改文件拥有者"></a>2. 修改文件拥有者</h3><p>不仅可以修改文件拥有者，也可以修改文件所属群组。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"># chown [-R] 用户名:群组名 dirname/filename</div></pre></td></tr></table></figure>
<h3 id="3-修改权限"><a href="#3-修改权限" class="headerlink" title="3. 修改权限"></a>3. 修改权限</h3><p>可以将一组权限用数字来表示，此时一组权限的 3 个位当做二进制数字的位，从左到右每个位的权值为 4、2、1，即每个权限对应的数字权值为 r：4、w：2、x：1。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"># chmod [-R] xyz dirname/filename</div></pre></td></tr></table></figure>
<p>范例：将 .bashrc 文件的权限修改为 -rwxr-xr–。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"># chmod 754 .bashrc</div></pre></td></tr></table></figure>
<p>也可以使用符号来设定权限。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"># chmod [ugoa]  [+-=] [rwx] dirname/filename</div><div class="line">- u：拥有者</div><div class="line">- g：所属群组</div><div class="line">- o：其他人</div><div class="line">- a：所有人</div><div class="line">- +：添加权限</div><div class="line">- -：移除权限</div><div class="line">- =：设定权限</div></pre></td></tr></table></figure>
<p>范例：为 .bashrc 文件的所有用户添加写权限。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"># chmod a+w .bashrc</div></pre></td></tr></table></figure>
<h2 id="目录的权限"><a href="#目录的权限" class="headerlink" title="目录的权限"></a>目录的权限</h2><p>文件名不是存储在一个文件的内容中，而是存储在一个文件所在的目录中。因此，拥有文件的 w 权限并不能对文件名进行修改。</p>
<p>目录存储文件列表，一个目录的权限也就是对其文件列表的权限。因此，目录的 r 权限表示可以读取文件列表；w 权限表示可以修改文件列表，具体来说，就是添加删除文件，对文件名进行修改；x 权限可以让该目录成为工作目录，x 权限是 r 和 w 权限的基础，如果不能使一个目录成为工作目录，也就没办法读取文件列表以及对文件列表进行修改了。</p>
<h2 id="文件默认权限"><a href="#文件默认权限" class="headerlink" title="文件默认权限"></a>文件默认权限</h2><p>文件默认权限：文件默认没有可执行权限，因此为 666，也就是 -rw-rw-rw- 。<br>目录默认权限：目录必须要能够进入，也就是必须拥有可执行权限，因此为 777 ，也就是 drwxrwxrwx。</p>
<p>可以通过 umask 设置或者查看文件的默认权限，通常以掩码的形式来表示，例如 002 表示其它用户的权限去除了一个 2 的权限，也就是写权限，因此建立新文件时默认的权限为 -rw-rw-r– 。</p>
<h2 id="目录配置"><a href="#目录配置" class="headerlink" title="目录配置"></a>目录配置</h2><p>为了使不同 Linux 发行版本的目录结构保持一致性，Filesystem Hierarchy Standard (FHS) 规定了 Linux 的目录结构。最基础的三个目录如下：</p>
<ul>
<li>/ (root, 根目录)</li>
<li>/usr (unix software resource)：所有系统默认软件都会安装到这个目录；</li>
<li>/var (variable)：存放系统或程序运行过程中的数据文件。</li>
</ul>
<p>完整的目录树如下：</p>
<p><br><div align="center"> <img src="https://github.com/CyC2018/InterviewNotes/raw/master/pics//27ace615-558f-4dfb-8ad4-7ac769c10118.jpg"> </div><br></p>
<h1 id="文件与目录"><a href="#文件与目录" class="headerlink" title="文件与目录"></a>文件与目录</h1><h2 id="文件时间"><a href="#文件时间" class="headerlink" title="文件时间"></a>文件时间</h2><ol>
<li>modification time (mtime)：文件的内容更新就会更新；</li>
<li>status time (ctime)：文件的状态（权限、属性）更新就会更新；</li>
<li>access time (atime)：读取文件时就会更新。</li>
</ol>
<h2 id="文件与目录的基本操作"><a href="#文件与目录的基本操作" class="headerlink" title="文件与目录的基本操作"></a>文件与目录的基本操作</h2><h3 id="1-ls"><a href="#1-ls" class="headerlink" title="1. ls"></a>1. ls</h3><p>列出文件或者目录的信息，目录的信息就是其中包含的文件。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># ls [-aAdfFhilnrRSt] file|dir</div><div class="line">-a ：列出全部的文件</div><div class="line">-d ：仅列出目录本身</div><div class="line">-l ：以长数据串行列出，包含文件的属性与权限等等数据</div></pre></td></tr></table></figure>
<h3 id="2-cp"><a href="#2-cp" class="headerlink" title="2. cp"></a>2. cp</h3><p>复制操作。</p>
<p>如果源文件有两个以上，则目的文件一定要是目录才行。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">cp [-adfilprsu] source destination</div><div class="line">-a ：相当于 -dr --preserve=all 的意思，至于 dr 请参考下列说明</div><div class="line">-d ：若来源文件为链接文件，则复制链接文件属性而非文件本身</div><div class="line">-i ：若目标文件已经存在时，在覆盖前会先询问</div><div class="line">-p ：连同文件的属性一起复制过去</div><div class="line">-r ：递归持续复制</div><div class="line">-u ：destination 比 source 旧才更新 destination，或 destination 不存在的情况下才复制</div><div class="line">--preserve=all ：除了 -p 的权限相关参数外，还加入 SELinux 的属性, links, xattr 等也复制了</div></pre></td></tr></table></figure>
<h3 id="3-rm"><a href="#3-rm" class="headerlink" title="3. rm"></a>3. rm</h3><p>移除操作。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># rm [-fir] 文件或目录</div><div class="line">-r ：递归删除</div></pre></td></tr></table></figure>
<h3 id="4-mv"><a href="#4-mv" class="headerlink" title="4. mv"></a>4. mv</h3><p>移动操作。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"># mv [-fiu] source destination</div><div class="line"># mv [options] source1 source2 source3 .... directory</div><div class="line">-f ： force 强制的意思，如果目标文件已经存在，不会询问而直接覆盖</div></pre></td></tr></table></figure>
<h2 id="获取文件内容"><a href="#获取文件内容" class="headerlink" title="获取文件内容"></a>获取文件内容</h2><h3 id="1-cat"><a href="#1-cat" class="headerlink" title="1. cat"></a>1. cat</h3><p>取得文件内容。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># cat [-AbEnTv] filename</div><div class="line">-n ：打印出行号，连同空白行也会有行号，-b 不会</div></pre></td></tr></table></figure>
<h3 id="2-tac"><a href="#2-tac" class="headerlink" title="2. tac"></a>2. tac</h3><p>是 cat 的反向操作，从最后一行开始打印。</p>
<h3 id="3-more"><a href="#3-more" class="headerlink" title="3. more"></a>3. more</h3><p>可以一页一页查看文件内容，和文本编辑器类似。</p>
<h3 id="4-less"><a href="#4-less" class="headerlink" title="4. less"></a>4. less</h3><p>和 more 类似。</p>
<h3 id="5-head"><a href="#5-head" class="headerlink" title="5. head"></a>5. head</h3><p>可以取得文件前几行。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># head [-n number] filename</div><div class="line">-n ：后面接数字，代表显示几行的意思</div></pre></td></tr></table></figure>
<h3 id="6-tail"><a href="#6-tail" class="headerlink" title="6. tail"></a>6. tail</h3><p>是 head 的反向操作，只是取得是后几行。</p>
<h3 id="7-od"><a href="#7-od" class="headerlink" title="7. od"></a>7. od</h3><p>可以以字符或者十六进制的形式显示二进制文件。</p>
<h3 id="8-touch"><a href="#8-touch" class="headerlink" title="8. touch"></a>8. touch</h3><p>修改文件时间或者建立新文件。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"># touch [-acdmt] filename</div><div class="line">-a ： 更新 atime</div><div class="line">-c ： 更新 ctime，若该文件不存在则不建立新文件</div><div class="line">-m ： 更新 mtime</div><div class="line">-d ： 后面可以接欲更新的日期而不用当前的日期，也可以使用 --date="日期或时间"</div><div class="line">-t ：后面可以接欲更新的时间而不用当前的时间，格式为[YYYYMMDDhhmm]</div></pre></td></tr></table></figure>
<h2 id="指令与文件搜索"><a href="#指令与文件搜索" class="headerlink" title="指令与文件搜索"></a>指令与文件搜索</h2><h3 id="1-which"><a href="#1-which" class="headerlink" title="1. which"></a>1. which</h3><p>指令搜索。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># which [-a] command</div><div class="line">-a ：将所有指令列出，而不是只列第一个</div></pre></td></tr></table></figure>
<h3 id="2-whereis"><a href="#2-whereis" class="headerlink" title="2. whereis"></a>2. whereis</h3><p>whereis 搜索文件的速度比较快，因为它只搜索几个特定的目录。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"># whereis [-bmsu] dirname/filename</div></pre></td></tr></table></figure>
<h3 id="3-locate"><a href="#3-locate" class="headerlink" title="3. locate"></a>3. locate</h3><p>locate 可以用关键字或者正则表达式进行搜索。</p>
<p>locate 使用 /var/lib/mlocate/ 这个数据库来进行搜索，它存储在内存中，并且每天更新一次，所以无法用 locate 搜索新建的文件。可以使用 updatedb 来立即更新数据库。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># locate [-ir] keyword</div><div class="line">-r：接正则表达式</div></pre></td></tr></table></figure>
<h3 id="4-find"><a href="#4-find" class="headerlink" title="4. find"></a>4. find</h3><p>find 可以使用文件的属性和权限进行搜索。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"># find filename [option]</div></pre></td></tr></table></figure>
<h4 id="4-1-与时间有关的选项"><a href="#4-1-与时间有关的选项" class="headerlink" title="4.1 与时间有关的选项"></a>4.1 与时间有关的选项</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">-mtime  n ：列出在 n 天前的那一天修改过内容的文件</div><div class="line">-mtime +n ：列出在 n 天之前(不含 n 天本身)修改过内容的文件</div><div class="line">-mtime -n ：列出在 n 天之内(含 n 天本身)修改过内容的文件</div><div class="line">-newer file ： 列出比 file 更新的文件</div></pre></td></tr></table></figure>
<p>+4、4 和 -4 的指示的时间范围如下：</p>
<p><br><div align="center"> <img src="https://github.com/CyC2018/InterviewNotes/raw/master/pics//658fc5e7-79c0-4247-9445-d69bf194c539.png"> </div><br></p>
<h4 id="4-2-与文件拥有者和所属群组有关的选项"><a href="#4-2-与文件拥有者和所属群组有关的选项" class="headerlink" title="4.2 与文件拥有者和所属群组有关的选项"></a>4.2 与文件拥有者和所属群组有关的选项</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">-uid n</div><div class="line">-gid n</div><div class="line">-user name</div><div class="line">-group name</div><div class="line">-nouser ：搜索拥有者不存在 /etc/passwd 的文件</div><div class="line">-nogroup：搜索所属群组不存在于 /etc/group 的文件</div></pre></td></tr></table></figure>
<h4 id="4-3-与文件权限和名称有关的选项"><a href="#4-3-与文件权限和名称有关的选项" class="headerlink" title="4.3 与文件权限和名称有关的选项"></a>4.3 与文件权限和名称有关的选项</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">-name filename</div><div class="line">-size [+-]SIZE：搜寻比 SIZE 还要大(+)或小(-)的文件。这个 SIZE 的规格有：c: 代表 byte，k: 代表 1024bytes。所以，要找比 50KB 还要大的文件，就是 -size +50k</div><div class="line">-type TYPE</div><div class="line">-perm mode  ：搜索权限等于 mode 的文件</div><div class="line">-perm -mode ：搜索权限包含 mode 的文件</div><div class="line">-perm /mode ：搜索权限包含任一 mode 的文件</div></pre></td></tr></table></figure>
<h1 id="磁盘与文件系统"><a href="#磁盘与文件系统" class="headerlink" title="磁盘与文件系统"></a>磁盘与文件系统</h1><h2 id="文件系统的组成"><a href="#文件系统的组成" class="headerlink" title="文件系统的组成"></a>文件系统的组成</h2><p>对分区进行格式化是为了在分区上建立文件系统。一个分区通常只能格式化为一个文件系统，但是磁盘阵列等技术可以将一个分区格式化为多个文件系统，因此只有文件系统能被挂载，而分区不能被挂载。</p>
<p>文件系统有以下三个结构：</p>
<ol>
<li>superblock：记录文件系统的整体信息，包括 inode 和 block 的总量、使用量、剩余量，以及文件系统的格式与相关信息等；</li>
<li>inode：一个文件占用一个 inode，记录文件的属性，同时记录此文件的内容所在的 block 号码；</li>
<li>block：记录文件的内容，文件太大时，会占用多个 block。</li>
</ol>
<p>当要读取一个文件的内容时，先在 inode 中去查找文件内容所在的所有 block，然后把所有 block 的内容读出来。</p>
<p>磁盘碎片是指一个文件内容所在的 block 过于分散。</p>
<p>Ext2 文件系统使用了上述的文件结构，并在此之上加入了 block 群组的概念，也就是将一个文件系统划分为多个 block 群组，方便管理。</p>
<p><br><div align="center"> <img src="https://github.com/CyC2018/InterviewNotes/raw/master/pics//1974a836-aa6b-4fb8-bce1-6eb11969284a.jpg"> </div><br></p>
<h2 id="inode"><a href="#inode" class="headerlink" title="inode"></a>inode</h2><p>Ext2 文件系统支持的 block 大小有 1k、2k 和 4k 三种，不同的 block 大小限制了单一文件的大小。而每个 inode 大小是固定为 128 bytes。</p>
<p>inode 中记录了文件内容所在的 block，但是每个 block 非常小，一个大文件随便都需要几十万的 block，而一个 inode 大小有限，无法直接引用这么多 block。因此引入了间接、双间接、三间接引用。间接引用是指，让 inode 记录的引用 block 块当成 inode 用来记录引用信息。</p>
<p><br><div align="center"> <img src="https://github.com/CyC2018/InterviewNotes/raw/master/pics//89091427-7b2b-4923-aff6-44681319a8aa.jpg"> </div><br></p>
<p>inode 具体包含以下信息：</p>
<ul>
<li>该文件的存取模式(read/write/excute)；</li>
<li>该文件的拥有者与群组(owner/group)；</li>
<li>该文件的容量；</li>
<li>该文件建立或状态改变的时间(ctime)；</li>
<li>最近一次的读取时间(atime)；</li>
<li>最近修改的时间(mtime)；</li>
<li>定义文件特性的旗标(flag)，如 SetUID…；</li>
<li>该文件真正内容的指向 (pointer)。</li>
</ul>
<h2 id="目录的-inode-与-block"><a href="#目录的-inode-与-block" class="headerlink" title="目录的 inode 与 block"></a>目录的 inode 与 block</h2><p>建立一个目录时，会分配一个 inode 与至少一个 block。block 记录的内容是目录下所有文件的 inode 编号以及文件名。可以看出文件的 inode 本身不记录文件名，文件名记录在目录中，因此新增文件、删除文件、更改文件名这些操作与目录的 w 权限有关。</p>
<h2 id="实体链接与符号链接"><a href="#实体链接与符号链接" class="headerlink" title="实体链接与符号链接"></a>实体链接与符号链接</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"># ln [-sf] source_filename dist_filename</div><div class="line">-s ：默认是 hard link，加 -s 为 symbolic link</div><div class="line">-f ：如果目标文件存在时，先删除目标文件</div></pre></td></tr></table></figure>
<h3 id="1-实体链接"><a href="#1-实体链接" class="headerlink" title="1. 实体链接"></a>1. 实体链接</h3><p>hard link 只是在某个目录下新增一个条目，使得新增的条目链接到文件的 inode 上。删除任意一个条目，文件还是存在，只要引用数量不为 0。</p>
<p>有以下限制：不能跨越 File System；不能对目录进行链接。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># ln /etc/crontab .</div><div class="line"># ll -i /etc/crontab crontab</div><div class="line">34474855 -rw-r--r--. 2 root root 451 Jun 10 2014 crontab</div><div class="line">34474855 -rw-r--r--. 2 root root 451 Jun 10 2014 /etc/crontab</div></pre></td></tr></table></figure>
<h3 id="2-符号链接"><a href="#2-符号链接" class="headerlink" title="2. 符号链接"></a>2. 符号链接</h3><p>symbolic link 可以理解为 Windows 的快捷方式，通过建立一个独立的文件，这个文件的数据的读取指向链接的那个文件。当源文件被删除了，链接文件就打不开了。</p>
<p>symbolic link 可以为目录建立链接。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"># ll -i /etc/crontab /root/crontab2</div><div class="line">34474855 -rw-r--r--. 2 root root 451 Jun 10 2014 /etc/crontab</div><div class="line">53745909 lrwxrwxrwx. 1 root root 12 Jun 23 22:31 /root/crontab2 -&gt; /etc/crontab</div></pre></td></tr></table></figure>
<h1 id="压缩与打包"><a href="#压缩与打包" class="headerlink" title="压缩与打包"></a>压缩与打包</h1><h2 id="压缩"><a href="#压缩" class="headerlink" title="压缩"></a>压缩</h2><p>Linux 底下有很多压缩文件的扩展名，常见的如下：</p>
<table>
<thead>
<tr>
<th>扩展名</th>
<th>压缩程序</th>
</tr>
</thead>
<tbody>
<tr>
<td>*.Z</td>
<td>compress</td>
</tr>
<tr>
<td>*.zip</td>
<td>zip</td>
</tr>
<tr>
<td>*.gz</td>
<td>gzip</td>
</tr>
<tr>
<td>*.bz2</td>
<td>bzip2</td>
</tr>
<tr>
<td>*.xz</td>
<td>xz</td>
</tr>
<tr>
<td>*.tar</td>
<td>tar 程序打包的数据，没有经过压缩</td>
</tr>
<tr>
<td>*.tar.gz</td>
<td>tar 程序打包的文件，经过 gzip 的压缩</td>
</tr>
<tr>
<td>*.tar.bz2</td>
<td>tar 程序打包的文件，经过 bzip2 的压缩</td>
</tr>
<tr>
<td>*.tar.xz</td>
<td>tar 程序打包的文件，经过 xz 的压缩</td>
</tr>
</tbody>
</table>
<h3 id="1-gzip"><a href="#1-gzip" class="headerlink" title="1. gzip"></a>1. gzip</h3><p>gzip 是 Linux 使用最广的压缩指令，可以解开 compress、zip 与 gzip 所压缩的文件。</p>
<p>经过 gzip 压缩过，源文件就不存在了。</p>
<p>有 9 个不同的压缩等级可以使用。</p>
<p>可以使用 zcat、zmore、zless 来读取压缩文件的内容。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">$ gzip [-cdtv#] filename</div><div class="line">-c ：将压缩的数据输出到屏幕上</div><div class="line">-d ：解压缩</div><div class="line">-t ：检验压缩文件是否出错</div><div class="line">-v ：显示压缩比等信息</div><div class="line">-# ： # 为数字的意思，代表压缩等级，数字越大压缩比越高，默认为6</div></pre></td></tr></table></figure>
<h3 id="2-bzip2"><a href="#2-bzip2" class="headerlink" title="2. bzip2"></a>2. bzip2</h3><p>提供比 gzip 更高的压缩比。</p>
<p>查看命令：bzcat、bzmore、bzless、bzgrep。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ bzip2 [-cdkzv#] filename</div><div class="line">-k ：保留源文件</div></pre></td></tr></table></figure>
<h3 id="3-xz"><a href="#3-xz" class="headerlink" title="3. xz"></a>3. xz</h3><p>提供比 bzip2 更佳的压缩比。</p>
<p>可以看到，gzip、bzip2、xz 的压缩比不断优化。不过要注意，压缩比越高，压缩的时间也越长。</p>
<p>查看命令：xzcat、xzmore、xzless、xzgrep。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ xz [-dtlkc#] filename</div></pre></td></tr></table></figure>
<h2 id="打包"><a href="#打包" class="headerlink" title="打包"></a>打包</h2><p>压缩指令只能对一个文件进行压缩，而打包能够将多个文件打包成一个大文件。tar 不仅可以用于打包，也可以使用 gip、bzip2、xz 将打包文件进行压缩。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">$ tar [-z|-j|-J] [cv] [-f 新建的tar文件] filename...  ==打包压缩</div><div class="line">$ tar [-z|-j|-J] [tv] [-f 已有的tar文件]              ==查看</div><div class="line">$ tar [-z|-j|-J] [xv] [-f 已有的tar文件] [-C 目录]    ==解压缩</div><div class="line">-z ：使用zip；</div><div class="line">-j ：使用bzip2；</div><div class="line">-J ：使用xz；</div><div class="line">-c ：新建打包文件；</div><div class="line">-t ：查看打包文件里面有哪些文件；</div><div class="line">-x ：解打包或解压缩的功能；</div><div class="line">-v ：在压缩/解压缩的过程中，显示正在处理的文件名；</div><div class="line">-f : filename：要处理的文件；</div><div class="line">-C 目录 ： 在特定目录解压缩。</div></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>使用方式</th>
<th>命令</th>
</tr>
</thead>
<tbody>
<tr>
<td>打包压缩</td>
<td>tar -jcv -f filename.tar.bz2 要被压缩的文件或目录名称</td>
</tr>
<tr>
<td>查 看</td>
<td>tar -jtv -f filename.tar.bz2</td>
</tr>
<tr>
<td>解压缩</td>
<td>tar -jxv -f filename.tar.bz2 -C 要解压缩的目录</td>
</tr>
</tbody>
</table>
<h1 id="Bash"><a href="#Bash" class="headerlink" title="Bash"></a>Bash</h1><p>可以通过 Shell 请求内核提供服务，Bash 正是 Shell 的一种。</p>
<h2 id="Bash-特性"><a href="#Bash-特性" class="headerlink" title="Bash 特性"></a>Bash 特性</h2><p><strong>1. 命令历史</strong> </p>
<p>记录使用过的命令。本次登录所执行的命令都会暂时存放到内存中， ~/.bash_history 文件中记录的是前一次登录所执行过的命令。</p>
<p><strong>2. 命令与文件补全</strong> </p>
<p>快捷键：tab</p>
<p><strong>3. 命名别名</strong> </p>
<p>例如 lm 是 ls -al 的别名。</p>
<p><strong>4. shell scripts</strong> </p>
<p><strong>5. 通配符</strong> </p>
<p>例如 ls -l /usr/bin/X* 列出 /usr/bin 下面所有以 X 开头的文件。</p>
<h2 id="变量操作"><a href="#变量操作" class="headerlink" title="变量操作"></a>变量操作</h2><ul>
<li>对一个变量赋值直接使用 = ；</li>
<li>对变量取用需要在变量前加上 \$ ，也可以用 \${} 的形式；</li>
<li>输出变量使用 echo 命令。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ var=abc</div><div class="line">$ <span class="built_in">echo</span> <span class="variable">$var</span></div><div class="line">$ <span class="built_in">echo</span> <span class="variable">$&#123;var&#125;</span></div></pre></td></tr></table></figure>
<p>变量内容如果有空格，需要使用双引号或者单引号。双引号内的特殊字符可以保留原本特性，例如var=”lang is \$LANG”，则 var 的值为 lang is zh_TW.UTF-8；而单引号内的特殊字符就是特殊字符本身，例如 var=’lang is \$LANG’，则 var 的值为 lang is \$LANG。</p>
<p>可以使用 `指令` 或者 \$(指令) 的方式将指令的执行结果赋值给变量。例如 version=\$(uname -r)，则 version 的值为 3.10.0-229.el7.x86_64。</p>
<p>可以使用 export 命令将自定义变量转成环境变量，环境变量可以在子程序中使用，所谓子程序就是由当前 Bash 而产生的子 Bash。</p>
<p>Bash 的变量可以声明为数组和整数数字。注意数字类型没有浮点数。如果不进行声明，默认是字符串类型。变量的声明使用 declare 命令：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$ declare [-aixr] variable</div><div class="line">-a ： 定义为数组类型</div><div class="line">-i ： 定义为整数类型</div><div class="line">-x ： 定义为环境变量</div><div class="line">-r ： 定义为readonly类型</div></pre></td></tr></table></figure>
<p>使用 [ ] 来对数组进行操作：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ array[1]=a</div><div class="line">$ array[2]=b</div><div class="line">$ <span class="built_in">echo</span> <span class="variable">$&#123;array[1]&#125;</span></div></pre></td></tr></table></figure>
<h2 id="指令搜索顺序"><a href="#指令搜索顺序" class="headerlink" title="指令搜索顺序"></a>指令搜索顺序</h2><ol>
<li>以绝对或相对路径来执行指令，例如 /bin/ls 或者 ./ls ；</li>
<li>由别名找到该指令来执行；</li>
<li>由 Bash 内建的指令来执行；</li>
<li>按 \$PATH 变量指定的搜索路径的顺序找到第一个指令来执行。</li>
</ol>
<h2 id="数据流重定向"><a href="#数据流重定向" class="headerlink" title="数据流重定向"></a>数据流重定向</h2><p>重定向就是使用文件代替标准输入、标准输出和标准错误输出。</p>
<ol>
<li>标准输入(stdin) &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;：代码为 0 ，使用 &lt; 或 &lt;&lt; ；</li>
<li>标准输出(stdout)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;：代码为 1 ，使用 &gt; 或 &gt;&gt; ；</li>
<li>标准错误输出(stderr)：代码为 2 ，使用 2&gt; 或 2&gt;&gt; ；</li>
</ol>
<p>其中，有一个箭头的表示以覆盖的方式重定向，而有两个箭头的表示以追加的方式重定向。</p>
<p>可以将不需要的标准输出以及标准错误输出重定向到 /dev/null，相当于扔进垃圾箱。</p>
<p>如果需要将标准输出以及标准错误输出同时重定向到一个文件，需要将某个输出转换为另一个输出，例如 2&gt;&amp;1 表示将标准错误输出转换为标准输出。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ find /home -name .bashrc &gt; list 2&gt;&amp;1</div></pre></td></tr></table></figure>
<h2 id="管线指令"><a href="#管线指令" class="headerlink" title="管线指令"></a>管线指令</h2><p>管线是将一个命令的标准输出作为另一个命令的标准输入，在数据需要经过多个步骤的处理之后才能得到我们想要的格式时就可以使用管线。在命令之间使用 | 分隔各个管线命令。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ ls -al /etc | less</div></pre></td></tr></table></figure>
<h3 id="1-提取指令：cut"><a href="#1-提取指令：cut" class="headerlink" title="1. 提取指令：cut"></a>1. 提取指令：cut</h3><p>提取过程一行一行地进行。</p>
<p>cut 对数据进行切分，取出想要的部分。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ cut</div><div class="line">-d ：分隔符</div><div class="line">-f ：经过 -d 分隔后，使用 -f n 取出第 n 个区间</div><div class="line">-c ：以字符为单位取出区间</div></pre></td></tr></table></figure>
<p>范例 1：last 将显示的登入者的信息，要求仅显示用户名。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">$ last</div><div class="line">root pts/1 192.168.201.101 Sat Feb 7 12:35 still logged in</div><div class="line">root pts/1 192.168.201.101 Fri Feb 6 12:13 - 18:46 (06:33)</div><div class="line">root pts/1 192.168.201.254 Thu Feb 5 22:37 - 23:53 (01:16)</div><div class="line"></div><div class="line">$ last | cut -d ' ' -f 1</div></pre></td></tr></table></figure>
<p>范例 2：将 export 输出的讯息，取得第 12 字符以后的所有字符串。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">$ export</div><div class="line">declare -x HISTCONTROL="ignoredups"</div><div class="line">declare -x HISTSIZE="1000"</div><div class="line">declare -x HOME="/home/dmtsai"</div><div class="line">declare -x HOSTNAME="study.centos.vbird"</div><div class="line">.....(其他省略).....</div><div class="line"></div><div class="line">$ export | cut -c 12</div></pre></td></tr></table></figure>
<h3 id="2-排序命令：sort、uniq"><a href="#2-排序命令：sort、uniq" class="headerlink" title="2. 排序命令：sort、uniq"></a>2. 排序命令：sort、uniq</h3><p><strong>sort</strong>  进行排序。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">$ sort [-fbMnrtuk] [file or stdin]</div><div class="line">-f ：忽略大小写</div><div class="line">-b ：忽略最前面的空格</div><div class="line">-M ：以月份的名字来排序，例如 JAN，DEC</div><div class="line">-n ：使用数字</div><div class="line">-r ：反向排序</div><div class="line">-u ：相当于 unique，重复的内容只出现一次</div><div class="line">-t ：分隔符，默认为 tab</div><div class="line">-k ：指定排序的区间</div></pre></td></tr></table></figure>
<p>范例：/etc/passwd 内容是以 : 来分隔的，以第三栏来排序。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$ cat /etc/passwd | sort -t ':' -k 3</div><div class="line">root:x:0:0:root:/root:/bin/bash</div><div class="line">dmtsai:x:1000:1000:dmtsai:/home/dmtsai:/bin/bash</div><div class="line">alex:x:1001:1002::/home/alex:/bin/bash</div><div class="line">arod:x:1002:1003::/home/arod:/bin/bash</div></pre></td></tr></table></figure>
<p><strong>uniq</strong>  可以将重复的数据只取一个。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ uniq [-ic]</div><div class="line">-i ：忽略大小写</div><div class="line">-c ：进行计数</div></pre></td></tr></table></figure>
<p>范例：取得每个人的登录总次数</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">$ last | cut -d ' ' -f 1 | sort | uniq -c</div><div class="line">1</div><div class="line">6 (unknown</div><div class="line">47 dmtsai</div><div class="line">4 reboot</div><div class="line">7 root</div><div class="line">1 wtmp</div></pre></td></tr></table></figure>
<h3 id="3-双向输出重定向：tee"><a href="#3-双向输出重定向：tee" class="headerlink" title="3. 双向输出重定向：tee"></a>3. 双向输出重定向：tee</h3><p>输出重定向会将输出内容重定向到文件中，而  <strong>tee</strong>  不仅能够完成这个功能，还能保留屏幕上的输出。也就是说，使用 tee 指令，一个输出会同时传送到文件和屏幕上。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ tee [-a] file</div></pre></td></tr></table></figure>
<h3 id="4-字符转换指令：tr、col、expand、join、paste"><a href="#4-字符转换指令：tr、col、expand、join、paste" class="headerlink" title="4. 字符转换指令：tr、col、expand、join、paste"></a>4. 字符转换指令：tr、col、expand、join、paste</h3><p>  <strong>tr</strong>  用来删除一行中的字符，或者对字符进行替换。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ tr [-ds] SET1 ...</div><div class="line">-d ： 删除行中 SET1 这个字符串</div></pre></td></tr></table></figure>
<p>范例，将 last 输出的信息所有小写转换为大写。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ last | tr '[a-z]' '[A-Z]'</div></pre></td></tr></table></figure>
<p>  <strong>col</strong>  将 tab 字符转为空格字符。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ col [-xb]</div><div class="line">-x ： 将 tab 键转换成对等的空格键</div></pre></td></tr></table></figure>
<p><strong>expand</strong>  将 tab 转换一定数量的空格，默认是 8 个。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ expand [-t] file</div><div class="line">-t ：tab 转为空格的数量</div></pre></td></tr></table></figure>
<p><strong>join</strong>  将有相同数据的那一行合并在一起。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$ join [-ti12] file1 file2</div><div class="line">-t ：分隔符，默认为空格</div><div class="line">-i ：忽略大小写的差异</div><div class="line">-1 ：第一个文件所用的比较字段</div><div class="line">-2 ：第二个文件所用的比较字段</div></pre></td></tr></table></figure>
<p><strong>paste</strong>  直接将两行粘贴在一起。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ paste [-d] file1 file2</div><div class="line">-d ：分隔符，默认为 tab</div></pre></td></tr></table></figure>
<h3 id="5-分区指令：split"><a href="#5-分区指令：split" class="headerlink" title="5. 分区指令：split"></a>5. 分区指令：split</h3><p><strong>split</strong>  将一个文件划分成多个文件。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ split [-bl] file PREFIX</div><div class="line">-b ：以大小来进行分区，可加单位，例如 b, k, m 等</div><div class="line">-l ：以行数来进行分区。</div><div class="line">- PREFIX ：分区文件的前导名称</div></pre></td></tr></table></figure>
<h1 id="正规表示法与文件格式化处理"><a href="#正规表示法与文件格式化处理" class="headerlink" title="正规表示法与文件格式化处理"></a>正规表示法与文件格式化处理</h1><h2 id="grep"><a href="#grep" class="headerlink" title="grep"></a>grep</h2><p>使用正则表示式把匹配的行提取出来。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">$ grep [-acinv] [--color=auto] 搜寻字符串 filename</div><div class="line">-a ： 将 binary 文件以 text 文件的方式进行搜寻</div><div class="line">-c ： 计算找到个数</div><div class="line">-i ： 忽略大小写</div><div class="line">-n ： 输出行号</div><div class="line">-v ： 反向选择，亦即显示出没有 搜寻字符串 内容的那一行</div><div class="line">--color=auto ：找到的关键字加颜色显示</div></pre></td></tr></table></figure>
<p>范例：把含有 the 字符串的行提取出来（注意默认会有 –color=auto 选项，因此以下内容在 Linux 中有颜色显示 the 字符串）</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">$ grep -n 'the' regular_express.txt</div><div class="line">8:I can't finish the test.</div><div class="line">12:the symbol '*' is represented as start.</div><div class="line">15:You are the best is mean you are the no. 1.</div><div class="line">16:The world Happy is the same with "glad".</div><div class="line">18:google is the best tools for search keyword</div></pre></td></tr></table></figure>
<p>因为 { 与 } 的符号在 shell 是有特殊意义的，因此必须要使用使用转义字符进行转义。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ grep -n 'go\&#123;2,5\&#125;g' regular_express.txt</div></pre></td></tr></table></figure>
<h2 id="printf"><a href="#printf" class="headerlink" title="printf"></a>printf</h2><p>用于格式化输出。</p>
<p>它不属于管道命令，在给 printf 传数据时需要使用 $( ) 形式。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ printf '%10s %5i %5i %5i %8.2f \n' $(cat printf.txt)</div><div class="line">    DmTsai    80    60    92    77.33</div><div class="line">     VBird    75    55    80    70.00</div><div class="line">       Ken    60    90    70    73.33</div></pre></td></tr></table></figure>
<h2 id="awk"><a href="#awk" class="headerlink" title="awk"></a>awk</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ awk '条件类型1&#123;动作1&#125; 条件类型2&#123;动作2&#125; ...' filename</div></pre></td></tr></table></figure>
<p>awk 每次处理一行，处理的最小单位是字段，每个字段的命名方式为：\$n，n 为字段号，从 1 开始，\$0 表示一整行。</p>
<p>范例 1：取出登录用户的用户名和 ip</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">$ last -n 5</div><div class="line">dmtsai pts/0 192.168.1.100 Tue Jul 14 17:32 still logged in</div><div class="line">dmtsai pts/0 192.168.1.100 Thu Jul 9 23:36 - 02:58 (03:22)</div><div class="line">dmtsai pts/0 192.168.1.100 Thu Jul 9 17:23 - 23:36 (06:12)</div><div class="line">dmtsai pts/0 192.168.1.100 Thu Jul 9 08:02 - 08:17 (00:14)</div><div class="line">dmtsai tty1 Fri May 29 11:55 - 12:11 (00:15)</div><div class="line"></div><div class="line">$ last -n 5 | awk '&#123;print $1 "\t" $3&#125;</div></pre></td></tr></table></figure>
<p>awk 变量：</p>
<table>
<thead>
<tr>
<th>变量名称</th>
<th>代表意义</th>
</tr>
</thead>
<tbody>
<tr>
<td>NF</td>
<td>每一行拥有的字段总数</td>
</tr>
<tr>
<td>NR</td>
<td>目前所处理的是第几行数据</td>
</tr>
<tr>
<td>FS</td>
<td>目前的分隔字符，默认是空格键</td>
</tr>
</tbody>
</table>
<p>范例 2：输出正在处理的行号，并显示每一行有多少字段</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">$ last -n 5 | awk '&#123;print $1 "\t lines: " NR "\t columns: " NF&#125;'</div><div class="line">dmtsai lines: 1 columns: 10</div><div class="line">dmtsai lines: 2 columns: 10</div><div class="line">dmtsai lines: 3 columns: 10</div><div class="line">dmtsai lines: 4 columns: 10</div><div class="line">dmtsai lines: 5 columns: 9</div></pre></td></tr></table></figure>
<p>可以使用大于等于逻辑，其中等于使用 ==。</p>
<p>范例 3：/etc/passwd 文件第三个字段为 UID，对 UID 小于 10 的数据进行处理。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">cat /etc/passwd | awk &apos;BEGIN &#123;FS=&quot;:&quot;&#125; $3 &lt; 10 &#123;print $1 &quot;\t &quot; $3&#125;&apos;</div><div class="line">root 0</div><div class="line">bin 1</div><div class="line">daemon 2</div></pre></td></tr></table></figure>
<h1 id="vim-三个模式"><a href="#vim-三个模式" class="headerlink" title="vim 三个模式"></a>vim 三个模式</h1><p><br><div align="center"> <img src="https://github.com/CyC2018/InterviewNotes/raw/master/pics//341c632a-1fc1-4068-9b9f-bf7ef68ebb4c.jpg"> </div><br></p>
<p>在指令列模式下，有以下命令用于离开或者存储文件。</p>
<table>
<thead>
<tr>
<th>命令</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>:w</td>
<td>写入磁盘</td>
</tr>
<tr>
<td>:w!</td>
<td>当文件为只读时，强制写入磁盘。到底能不能写入，与用户对该文件的权限有关</td>
</tr>
<tr>
<td>:q</td>
<td>离开</td>
</tr>
<tr>
<td>:q!</td>
<td>强制离开不保存</td>
</tr>
<tr>
<td>:wq</td>
<td>写入磁盘后离开</td>
</tr>
<tr>
<td>:wq!</td>
<td>强制写入磁盘后离开</td>
</tr>
</tbody>
</table>
<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul>
<li>鸟哥. 鸟 哥 的 Linux 私 房 菜 基 础 篇 第 三 版[J]. 2009.</li>
<li><a href="https://www.ibm.com/developerworks/cn/linux/l-cn-rpmdpkg/index.html" target="_blank" rel="external">Linux 平台上的软件包管理</a></li>
</ul>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/02/05/MySQL/" rel="next" title="Mysql 复习">
                <i class="fa fa-chevron-left"></i> Mysql 复习
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="John Doe" />
          <p class="site-author-name" itemprop="name">John Doe</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">6</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">1</span>
                <span class="site-state-item-name">分类</span>
              
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              
                <span class="site-state-item-count">1</span>
                <span class="site-state-item-name">标签</span>
              
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#常用操作以及概念"><span class="nav-number">1.</span> <span class="nav-text">常用操作以及概念</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#求助"><span class="nav-number">1.1.</span> <span class="nav-text">求助</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#关机"><span class="nav-number">1.2.</span> <span class="nav-text">关机</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#查看进程"><span class="nav-number">1.3.</span> <span class="nav-text">查看进程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#查看端口"><span class="nav-number">1.4.</span> <span class="nav-text">查看端口</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#PATH"><span class="nav-number">1.5.</span> <span class="nav-text">PATH</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#运行等级"><span class="nav-number">1.6.</span> <span class="nav-text">运行等级</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#sudo"><span class="nav-number">1.7.</span> <span class="nav-text">sudo</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#GNU"><span class="nav-number">1.8.</span> <span class="nav-text">GNU</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#包管理工具"><span class="nav-number">1.9.</span> <span class="nav-text">包管理工具</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#常见发行版本"><span class="nav-number">1.10.</span> <span class="nav-text">常见发行版本</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#分区"><span class="nav-number">2.</span> <span class="nav-text">分区</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#磁盘的文件名"><span class="nav-number">2.1.</span> <span class="nav-text">磁盘的文件名</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#分区表"><span class="nav-number">2.2.</span> <span class="nav-text">分区表</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-MBR"><span class="nav-number">2.2.1.</span> <span class="nav-text">1. MBR</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-GPT"><span class="nav-number">2.2.2.</span> <span class="nav-text">2. GPT</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#开机检测程序"><span class="nav-number">2.3.</span> <span class="nav-text">开机检测程序</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-BIOS"><span class="nav-number">2.3.1.</span> <span class="nav-text">1. BIOS</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-UEFI"><span class="nav-number">2.3.2.</span> <span class="nav-text">2. UEFI</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#挂载"><span class="nav-number">2.4.</span> <span class="nav-text">挂载</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#文件权限与目录配置"><span class="nav-number">3.</span> <span class="nav-text">文件权限与目录配置</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#文件权限概念"><span class="nav-number">3.1.</span> <span class="nav-text">文件权限概念</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#文件属性以及权限的修改"><span class="nav-number">3.2.</span> <span class="nav-text">文件属性以及权限的修改</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-修改文件所属群组"><span class="nav-number">3.2.1.</span> <span class="nav-text">1. 修改文件所属群组</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-修改文件拥有者"><span class="nav-number">3.2.2.</span> <span class="nav-text">2. 修改文件拥有者</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-修改权限"><span class="nav-number">3.2.3.</span> <span class="nav-text">3. 修改权限</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#目录的权限"><span class="nav-number">3.3.</span> <span class="nav-text">目录的权限</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#文件默认权限"><span class="nav-number">3.4.</span> <span class="nav-text">文件默认权限</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#目录配置"><span class="nav-number">3.5.</span> <span class="nav-text">目录配置</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#文件与目录"><span class="nav-number">4.</span> <span class="nav-text">文件与目录</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#文件时间"><span class="nav-number">4.1.</span> <span class="nav-text">文件时间</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#文件与目录的基本操作"><span class="nav-number">4.2.</span> <span class="nav-text">文件与目录的基本操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-ls"><span class="nav-number">4.2.1.</span> <span class="nav-text">1. ls</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-cp"><span class="nav-number">4.2.2.</span> <span class="nav-text">2. cp</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-rm"><span class="nav-number">4.2.3.</span> <span class="nav-text">3. rm</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-mv"><span class="nav-number">4.2.4.</span> <span class="nav-text">4. mv</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#获取文件内容"><span class="nav-number">4.3.</span> <span class="nav-text">获取文件内容</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-cat"><span class="nav-number">4.3.1.</span> <span class="nav-text">1. cat</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-tac"><span class="nav-number">4.3.2.</span> <span class="nav-text">2. tac</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-more"><span class="nav-number">4.3.3.</span> <span class="nav-text">3. more</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-less"><span class="nav-number">4.3.4.</span> <span class="nav-text">4. less</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-head"><span class="nav-number">4.3.5.</span> <span class="nav-text">5. head</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-tail"><span class="nav-number">4.3.6.</span> <span class="nav-text">6. tail</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-od"><span class="nav-number">4.3.7.</span> <span class="nav-text">7. od</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-touch"><span class="nav-number">4.3.8.</span> <span class="nav-text">8. touch</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#指令与文件搜索"><span class="nav-number">4.4.</span> <span class="nav-text">指令与文件搜索</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-which"><span class="nav-number">4.4.1.</span> <span class="nav-text">1. which</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-whereis"><span class="nav-number">4.4.2.</span> <span class="nav-text">2. whereis</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-locate"><span class="nav-number">4.4.3.</span> <span class="nav-text">3. locate</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-find"><span class="nav-number">4.4.4.</span> <span class="nav-text">4. find</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#4-1-与时间有关的选项"><span class="nav-number">4.4.4.1.</span> <span class="nav-text">4.1 与时间有关的选项</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-2-与文件拥有者和所属群组有关的选项"><span class="nav-number">4.4.4.2.</span> <span class="nav-text">4.2 与文件拥有者和所属群组有关的选项</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-3-与文件权限和名称有关的选项"><span class="nav-number">4.4.4.3.</span> <span class="nav-text">4.3 与文件权限和名称有关的选项</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#磁盘与文件系统"><span class="nav-number">5.</span> <span class="nav-text">磁盘与文件系统</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#文件系统的组成"><span class="nav-number">5.1.</span> <span class="nav-text">文件系统的组成</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#inode"><span class="nav-number">5.2.</span> <span class="nav-text">inode</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#目录的-inode-与-block"><span class="nav-number">5.3.</span> <span class="nav-text">目录的 inode 与 block</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#实体链接与符号链接"><span class="nav-number">5.4.</span> <span class="nav-text">实体链接与符号链接</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-实体链接"><span class="nav-number">5.4.1.</span> <span class="nav-text">1. 实体链接</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-符号链接"><span class="nav-number">5.4.2.</span> <span class="nav-text">2. 符号链接</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#压缩与打包"><span class="nav-number">6.</span> <span class="nav-text">压缩与打包</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#压缩"><span class="nav-number">6.1.</span> <span class="nav-text">压缩</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-gzip"><span class="nav-number">6.1.1.</span> <span class="nav-text">1. gzip</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-bzip2"><span class="nav-number">6.1.2.</span> <span class="nav-text">2. bzip2</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-xz"><span class="nav-number">6.1.3.</span> <span class="nav-text">3. xz</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#打包"><span class="nav-number">6.2.</span> <span class="nav-text">打包</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Bash"><span class="nav-number">7.</span> <span class="nav-text">Bash</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Bash-特性"><span class="nav-number">7.1.</span> <span class="nav-text">Bash 特性</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#变量操作"><span class="nav-number">7.2.</span> <span class="nav-text">变量操作</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#指令搜索顺序"><span class="nav-number">7.3.</span> <span class="nav-text">指令搜索顺序</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数据流重定向"><span class="nav-number">7.4.</span> <span class="nav-text">数据流重定向</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#管线指令"><span class="nav-number">7.5.</span> <span class="nav-text">管线指令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-提取指令：cut"><span class="nav-number">7.5.1.</span> <span class="nav-text">1. 提取指令：cut</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-排序命令：sort、uniq"><span class="nav-number">7.5.2.</span> <span class="nav-text">2. 排序命令：sort、uniq</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-双向输出重定向：tee"><span class="nav-number">7.5.3.</span> <span class="nav-text">3. 双向输出重定向：tee</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-字符转换指令：tr、col、expand、join、paste"><span class="nav-number">7.5.4.</span> <span class="nav-text">4. 字符转换指令：tr、col、expand、join、paste</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-分区指令：split"><span class="nav-number">7.5.5.</span> <span class="nav-text">5. 分区指令：split</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#正规表示法与文件格式化处理"><span class="nav-number">8.</span> <span class="nav-text">正规表示法与文件格式化处理</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#grep"><span class="nav-number">8.1.</span> <span class="nav-text">grep</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#printf"><span class="nav-number">8.2.</span> <span class="nav-text">printf</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#awk"><span class="nav-number">8.3.</span> <span class="nav-text">awk</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#vim-三个模式"><span class="nav-number">9.</span> <span class="nav-text">vim 三个模式</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#参考资料"><span class="nav-number">10.</span> <span class="nav-text">参考资料</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">John Doe</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  





  





  






  





  

  

  

  

  

  

</body>
</html>
